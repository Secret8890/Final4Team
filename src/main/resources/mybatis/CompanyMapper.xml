<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gjob.backend.mapper.CompanyMapper">
    <select id="select" resultType="CompanyDTO">
        select * from Company order by co_seq desc
    </select>
    <select id="selectAjax" resultType="CompanyDTO">
      <![CDATA[
      select * from (select @rownum:=@rownum+1 as rnum, A.* from (select * from COMPANY order by co_seq desc) A, (select @rownum:=0) R) B where rnum>=#{startRow} and rnum<=#{endRow}
      ]]>
    </select>
    <select id="selectCount" resultType="int">
      select count(*) from COMPANY
    </select>
    <select id="selectBySeq" parameterType="String" resultType="CompanyDTO">
        select * from COMPANY where co_seq=#{co_seq}
    </select>
    <insert id="insert" parameterType="CompanyDTO">
        insert ignore into COMPANY(co_seq,co_name,co_name_href,co_title,co_job_name,co_location_name,co_career,co_start_date,co_end_date,co_url,co_job_mid_name,co_salary,co_job_type) values(#{co_seq},#{co_name},#{co_name_href},#{co_title},#{co_job_name},#{co_location_name},#{co_career},#{co_start_date},#{co_end_date},#{co_url},#{co_job_mid_name},#{co_salary},#{co_job_type})
    </insert>
    <delete id="deleteByDate" parameterType="String">
        <![CDATA[
        delete from COMPANY where date_format(co_end_date,"%Y-%m-%d")<#{co_end_date}
        ]]>
    </delete>
    <select id="selectByCapitalArea" resultType="CompanyDTO">
        select * from COMPANY where co_location_name like '서울%' or '경기%' order by co_seq desc limit 30
    </select>
    <select id="selectByEndDate" resultType="CompanyDTO">
        select * from company order by co_end_date, co_seq desc limit 30
    </select>
    <select id="selectByEndDateLogin" parameterType="String" resultType="CompanyDTO">
        select * from company where co_job_mid_name like concat('%',#{co_job_mid_name},'%') limit 30
    </select>
</mapper>